(this["webpackJsonpbankers-algorithm-virtualization"]=this["webpackJsonpbankers-algorithm-virtualization"]||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),s=a(9),n=a.n(s),o=(a(21),a(2)),i=a(3),l=(a(22),a(23),a(0));function d(e){var t=0;return Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col d-flex justify-content-center align-items-center pe-0",children:e.text}),Object(l.jsxs)("div",{className:"col fs-6 text-center ps-0",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col p-0",children:Object(l.jsx)("i",{className:"fas fa-plus-square fa-lg hover-pointer text-success m-0",onClick:e.increment})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col p-0",children:Object(l.jsx)("i",{className:"fas fa-minus-square fa-lg hover-pointer text-danger m-0",onClick:e.decrement})})})]})]})},t++)}var b=function(e){var t=Object(c.useState)([]),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){}),[r]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"row col-6 m-auto mt-4 pt-2 justify-content-center border border-dark",children:[Object(l.jsx)("div",{className:"row text-center",children:Object(l.jsx)("div",{className:"col",children:"Available"})}),Object(l.jsx)("div",{className:"row text-center border-bottom border-dark",children:e.banker.available.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:String.fromCharCode("A".charCodeAt(0)+t)},t)}))}),Object(l.jsx)("div",{className:"row text-center p-1",children:e.banker.available.map((function(t,a){return Object(l.jsx)(d,{text:t,increment:function(){!function(t){var a=Object(o.a)(e.banker.available);a[t]++,s(a),e.banker.available=a}(a)},decrement:function(){!function(t){var a=Object(o.a)(e.banker.available);a[t]>0&&a[t]--,s(a),e.banker.available=a}(a)}},a)}))})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Process Name"}),Object(l.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Allocated"}),Object(l.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Max"})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around"}),Object(l.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around",children:e.banker.available.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:String.fromCharCode("A".charCodeAt(0)+t)},t)}))}),Object(l.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around",children:e.banker.available.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:String.fromCharCode("A".charCodeAt(0)+t)},t)}))})]})]})};function u(e){var t=Object(c.useState)([]),a=Object(i.a)(t,2),r=(a[0],a[1]),s=Object(c.useState)([]),n=Object(i.a)(s,2),o=(n[0],n[1]),b=0;return Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"d-flex col text-center border border-dark border-top-0 m-0 p-1 justify-content-around align-items-center",children:["P",e.index]}),Object(l.jsx)("div",{className:"row col text-center border border-dark border-top-0 m-0 p-1 justify-content-around",children:e.process.allocated.map((function(t,a){return Object(l.jsx)(d,{text:t,index:a,increment:function(){var t;t=a,e.process.incrementAllocated(t),r(e.process.allocated),e.hideNeedMatrix()},decrement:function(){var t;t=a,e.process.decrementAllocated(t),r(e.process.allocated),e.hideNeedMatrix()}},b++)}))}),Object(l.jsx)("div",{className:"row col text-center border border-dark border-top-0 m-0 p-1 justify-content-around",children:e.process.max.map((function(t,a){return Object(l.jsx)(d,{text:t,index:a,increment:function(){var t;t=a,e.process.incrementMax(t),o(e.process.max),e.hideNeedMatrix()},decrement:function(){var t;t=a,e.process.decrementMax(t),o(e.process.max),e.hideNeedMatrix()}},b++)}))})]})}function j(e){return Object(l.jsxs)("div",{className:"row m-0 p-0",children:[Object(l.jsxs)("div",{className:"col-4 text-center border border-dark border-bottom-0 border-start-0 m-0 p-1 justify-content-around",children:["P",e.index]}),Object(l.jsx)("div",{className:"row col-8 text-center border border-dark border-bottom-0 border-end-0 m-0 p-1 justify-content-around",children:e.needVector.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:e},t)}))})]})}function m(e){return Object(l.jsxs)("div",{className:"row m-0 p-0",children:[Object(l.jsx)("div",{className:"col-4 text-center",children:"Process Name"}),Object(l.jsxs)("div",{className:"col-8",children:[Object(l.jsx)("div",{className:"row text-center",children:Object(l.jsx)("div",{className:"col",children:"Needed Resources"})}),Object(l.jsx)("div",{className:"row text-center p-1",children:e.banker.available.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:String.fromCharCode("A".charCodeAt(0)+t)},t)}))})]})]})}var h=a(10),v=a(11),f=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(Object(h.a)(this,e),this.allocated=a,this.max=c;this.allocated.length<t;)this.allocated.push(0);for(;this.max.length<t;)this.max.push(0);this.finish=!1}return Object(v.a)(e,[{key:"incrementAllocated",value:function(e){var t=Object(o.a)(this.allocated);t[e]++,this.allocated=Object(o.a)(t)}},{key:"decrementAllocated",value:function(e){var t=Object(o.a)(this.allocated);t[e]>0&&t[e]--,this.allocated=Object(o.a)(t)}},{key:"incrementMax",value:function(e){var t=Object(o.a)(this.max);t[e]++,this.max=Object(o.a)(t)}},{key:"decrementMax",value:function(e){var t=Object(o.a)(this.max);t[e]>0&&t[e]--,this.max=Object(o.a)(t)}},{key:"copy",value:function(){return new e(this.allocated.length,Object(o.a)(this.allocated),Object(o.a)(this.max))}},{key:"need",value:function(){var e=this;return this.max.map((function(t,a){return t-e.allocated[a]}))}},{key:"willItRunUsingResources",value:function(e){for(var t=this.need(),a=0;a<e.length;a++)if(t[a]>e[a])return!1;return!0}},{key:"end",value:function(){this.finish=!0}}]),e}(),x=function(){function e(t){Object(h.a)(this,e),this.processes=[],this.available=[],this.temporarilyAvailable=[];for(var a=0;a<t;a++)this.available.push(0);this.temporarilyAvailable=Object(o.a)(this.available)}return Object(v.a)(e,[{key:"encode",value:function(){var e=[this.available.length].concat(Object(o.a)(this.available));return this.processes.forEach((function(t){e=[].concat(Object(o.a)(e),Object(o.a)(t.allocated),Object(o.a)(t.max))})),e.join(",")}},{key:"addProcess",value:function(e){this.processes=[].concat(Object(o.a)(this.processes),[e])}},{key:"setAvailable",value:function(e){this.available=Object(o.a)(e)}},{key:"requestAdditionalResources",value:function(e,t){for(var a=this,c=[],r=Object(o.a)(t);r.length<this.available.length;)r.push(0);try{var s=this.processes[e];this.processes[e].allocated=s.allocated.map((function(e,t){return c[t]=r[t],e+r[t]})),this.available=this.available.map((function(e,t){return e-r[t]}))}catch(l){return void console.error("Invalid Index Provided to requestAdditionalResources")}var n=this.safe(),i=n[1].indexOf(e);return n[1][i]=[n[1][i],"req"],c.forEach((function(t,c){a.processes[e].allocated[c]-=t,a.available[c]+=t})),n}},{key:"safe",value:function(){for(var e=[],t=!0;t;){t=!1;for(var a=0;a<this.processes.length;a++){var c=this.processes[a],r=c.finish,s=c.willItRunUsingResources(this.available);!1===r&&s&&(this.getProcessResources(c),c.end(),t=!0,e.push(a))}}return this.processes.every((function(e){return e.finish}))?(this.restoreTemporarilyAvailableResources(),this.processes=this.processes.map((function(e){return e.finish=!1,e})),[!0,e]):(this.restoreTemporarilyAvailableResources(),[!1,[]])}},{key:"restoreTemporarilyAvailableResources",value:function(){var e=this;this.available=this.available.map((function(t,a){return t-e.temporarilyAvailable[a]})),this.temporarilyAvailable=this.temporarilyAvailable.map((function(){return 0}))}},{key:"getProcessResources",value:function(e){for(var t=0;t<e.allocated.length;t++)this.available[t]+=e.allocated[t],this.temporarilyAvailable[t]+=e.allocated[t]}},{key:"getNeedMatrix",value:function(){return this.processes.map((function(e){return e.need()}))}},{key:"print",value:function(){console.log("Available:",this.available);for(var e=0;e<this.processes.length;e++)console.log("Process ".concat(e,": "),this.processes[e])}}],[{key:"fromString",value:function(t){for(var a=0,c=t.split(",").map((function(e){return parseInt(e)})),r=c[a++],s=new e(r),n=[],o=0;o<r;o++)n.push(c[a++]);for(;void 0!==c[a];){for(var i=[],l=[],d=0;d<r;d++)i.push(c[a++]);for(var b=0;b<r;b++)l.push(c[a++]);s.addProcess(new f(r,i,l)),s.setAvailable(n)}return s}}]),e}();var O=a(5),p=a.n(O),N={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},g={display:"block",marginLeft:"auto",marginBottom:"20px"};function k(e){var t=Object(c.useState)(null),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)(e.banker.available.map((function(){return 0}))),d=Object(i.a)(n,2),b=d[0],u=d[1],j=function(e){var t=Object(o.a)(b);t[parseInt(e.target.name)]=parseInt(e.target.value),u(t)};return Object(l.jsxs)(p.a,{isOpen:e.modalOpen,style:N,onRequestClose:e.toggleModal,shouldCloseOnOverlayClick:!0,children:[Object(l.jsx)("button",{className:"btn btn-white p-0",style:g,onClick:e.toggleModal,children:Object(l.jsx)("i",{className:"fas fa-times-circle fa-lg hover-pointer text-danger m-0"})}),Object(l.jsx)("div",{className:"row text-center mb-4",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("select",{name:"process",id:"process",defaultValue:"-",onChange:function(e){s(parseInt(e.target.value))},children:[Object(l.jsx)("option",{value:"-",disabled:!0,children:"Please select a process"},-1),e.banker.processes.map((function(e,t){return Object(l.jsxs)("option",{value:t,children:["P",t]},t)}))]})})}),Object(l.jsx)("div",{className:"row justify-content-around mb-4",children:e.banker.available.map((function(e,t){return Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("input",{name:t,onChange:j,className:"form-control",placeholder:String.fromCharCode("A".charCodeAt(0)+t),style:{maxWidth:"60px"}})},t)}))}),Object(l.jsx)("div",{className:"row text-center",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{className:"btn btn-success",onClick:function(){if(null!==r){var t=e.banker.requestAdditionalResources(r,b);alert(function(e){return e[0]?"Yes, the request can be granted with safe state, Safe state ".concat(Object.values(e[1]).reduce((function(e,t){return e+"P".concat(Array.isArray(t)?t.join(""):t,",")}),"<")).slice(0,-1)+">":"No"}(t)),e.toggleModal()}else e.toggleModal()},children:"Request Resources"})})})]})}p.a.setAppElement("#root");var y=a(16),C=a.n(y);function w(e){return Object(l.jsxs)(p.a,{isOpen:e.modalOpen,style:N,onRequestClose:e.toggleModal,shouldCloseOnOverlayClick:!0,children:[Object(l.jsx)("div",{className:"m-4",children:e.text}),Object(l.jsx)("div",{className:"m-4 text-center",children:Object(l.jsx)(C.a,{text:e.text,onCopy:function(){return alert("Copied to clipboard")},children:Object(l.jsx)("button",{className:"btn btn-primary",children:"Copy to Clipboard"})})})]})}var A=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(null),n=Object(i.a)(s,2),d=n[0],h=n[1],v=Object(c.useState)([]),O=Object(i.a)(v,2),p=O[0],N=O[1],g=Object(c.useState)(!1),y=Object(i.a)(g,2),C=y[0],A=y[1],S=Object(c.useState)(""),M=Object(i.a)(S,2),R=M[0],P=M[1],q=Object(c.useState)(""),I=Object(i.a)(q,2),E=I[0],F=I[1],T=Object(c.useState)(!1),B=Object(i.a)(T,2),L=B[0],V=B[1];Object(c.useEffect)((function(){d&&d.processes&&N(d.processes)}),[d]);var z=function(){A(!C)},J=function(){V(!L)},U=Object(c.useState)(null),Y=Object(i.a)(U,2),D=Y[0],W=Y[1],G=function(){W(null)},H=0;return null===d?Object(l.jsxs)("div",{className:"row my-4",children:[Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"text-center",children:[Object(l.jsx)("div",{className:"row my-4 text-center",children:Object(l.jsxs)("div",{className:"col-6 m-auto",children:[Object(l.jsx)("label",{className:"form-label fs-4 mb-4",children:"Enter the number of resources"}),Object(l.jsx)("input",{className:"form-control fs-5",onChange:function(e){r(e.target.value)},placeholder:"Resources"})]})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{className:"btn btn-primary fs-5",onClick:function(){if(a&&parseInt(a)&&a>0){var e=new x(a);h(e)}},children:"Submit"})})})]})}),Object(l.jsx)("div",{className:"col-1",children:"Or"}),Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("div",{className:"row my-4 text-center",children:Object(l.jsxs)("div",{className:"col-6 m-auto",children:[Object(l.jsx)("label",{className:"form-label fs-4 mb-4",children:"Enter a state"}),Object(l.jsx)("textarea",{value:R,onChange:function(e){P(e.target.value)}})]})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col text-center",children:Object(l.jsx)("button",{className:"btn btn-primary fs-5",onClick:function(){null!==R&&h(x.fromString(R))},children:"Enter State"})})})]})]}):Object(l.jsxs)("div",{className:"container my-4 py-4 fs-5",children:[Object(l.jsx)(k,{banker:d,modalOpen:C,toggleModal:z}),Object(l.jsx)(w,{text:E,modalOpen:L,toggleModal:J}),Object(l.jsx)("button",{className:"btn btn-success fs-5 me-2 mb-2",onClick:function(){F(d.encode()),J()},children:"Save State"}),Object(l.jsx)("button",{className:"btn btn-secondary fs-5 me-2 mb-2",onClick:function(){d.addProcess(new f(d.available.length)),N(Object(o.a)(d.processes)),G()},children:"Add Process"}),Object(l.jsx)("button",{className:"btn btn-primary fs-5 me-2 mb-2",onClick:function(){W(d.getNeedMatrix())},children:"Evaluate Need Matrix"}),Object(l.jsx)("button",{className:"btn btn-primary fs-5 me-2 mb-2",onClick:function(){var e=d.safe();alert(function(e){return e[0]?"Yes, Safe state ".concat(Object.values(e[1]).reduce((function(e,t){return e+"P".concat(t,",")}),"<")).slice(0,-1)+">":"No"}(e))},children:"Check System Safety"}),Object(l.jsx)("button",{className:"btn btn-warning fs-5 me-2 mb-2",onClick:function(){z()},children:"Check Request Safety"}),Object(l.jsx)(b,{hideNeedMatrix:G,banker:d}),p.map((function(e){return Object(l.jsx)(u,{index:H++,hideNeedMatrix:G,process:e},H)})),Object(l.jsx)("br",{}),D&&Object(l.jsxs)("div",{className:"row border border-dark",children:[Object(l.jsx)(m,{banker:d}),D.map((function(e,t){return Object(l.jsx)(j,{index:t,needVector:e},t)}))]})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;a(e),c(e),r(e),s(e),n(e)}))};n.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(A,{})}),document.getElementById("root")),S()}},[[39,1,2]]]);
//# sourceMappingURL=main.c172dcff.chunk.js.map