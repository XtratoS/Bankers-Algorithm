(this["webpackJsonpbankers-algorithm-virtualization"]=this["webpackJsonpbankers-algorithm-virtualization"]||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),s=a(9),n=a.n(s),o=(a(21),a(2)),l=a(3),i=(a(22),a(23),a(0));function d(e){var t=0;return Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col d-flex justify-content-center align-items-center pe-0",children:e.text}),Object(i.jsxs)("div",{className:"col fs-6 text-center ps-0",children:[Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col p-0",children:Object(i.jsx)("i",{className:"fas fa-plus-square fa-lg hover-pointer text-success m-0",onClick:e.increment})})}),Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col p-0",children:Object(i.jsx)("i",{className:"fas fa-minus-square fa-lg hover-pointer text-danger m-0",onClick:e.decrement})})})]})]})},t++)}var b=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){}),[r]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"row col-6 m-auto mt-4 pt-2 justify-content-center border border-dark",children:[Object(i.jsx)("div",{className:"row text-center",children:Object(i.jsx)("div",{className:"col",children:"Available"})}),Object(i.jsx)("div",{className:"row text-center border-bottom border-dark",children:e.banker.available.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("b",{children:String.fromCharCode("A".charCodeAt(0)+t)})},t)}))}),Object(i.jsx)("div",{className:"row text-center p-1",children:e.banker.available.map((function(t,a){return Object(i.jsx)(d,{text:t,increment:function(){!function(t){var a=Object(o.a)(e.banker.available);a[t]++,s(a),e.banker.available=a}(a)},decrement:function(){!function(t){var a=Object(o.a)(e.banker.available);a[t]>0&&a[t]--,s(a),e.banker.available=a}(a)}},a)}))})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Process Name"}),Object(i.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Allocated"}),Object(i.jsx)("div",{className:"col text-center border border-dark border-bottom-0 m-0 p-1",children:"Max"})]}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around"}),Object(i.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around",children:e.banker.available.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("b",{children:String.fromCharCode("A".charCodeAt(0)+t)})},t)}))}),Object(i.jsx)("div",{className:"row col text-center border border-top-0 border-dark m-0 p-1 justify-content-around",children:e.banker.available.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("b",{children:String.fromCharCode("A".charCodeAt(0)+t)})},t)}))})]})]})};function u(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),r=(a[0],a[1]),s=Object(c.useState)([]),n=Object(l.a)(s,2),o=(n[0],n[1]),b=0;return Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"d-flex col text-center border border-dark border-top-0 m-0 p-1 justify-content-around align-items-center",children:["P",e.index]}),Object(i.jsx)("div",{className:"row col text-center border border-dark border-top-0 m-0 p-1 justify-content-around",children:e.process.allocated.map((function(t,a){return Object(i.jsx)(d,{text:t,index:a,increment:function(){var t;t=a,e.process.incrementAllocated(t),r(e.process.allocated),e.hideNeedMatrix()},decrement:function(){var t;t=a,e.process.decrementAllocated(t),r(e.process.allocated),e.hideNeedMatrix()}},b++)}))}),Object(i.jsx)("div",{className:"row col text-center border border-dark border-top-0 m-0 p-1 justify-content-around",children:e.process.max.map((function(t,a){return Object(i.jsx)(d,{text:t,index:a,increment:function(){var t;t=a,e.process.incrementMax(t),o(e.process.max),e.hideNeedMatrix()},decrement:function(){var t;t=a,e.process.decrementMax(t),o(e.process.max),e.hideNeedMatrix()}},b++)}))})]})}function j(e){return Object(i.jsxs)("div",{className:"row m-0 p-0",children:[Object(i.jsxs)("div",{className:"col-4 text-center border border-dark border-bottom-0 border-start-0 m-0 p-1 justify-content-around",children:["P",e.index]}),Object(i.jsx)("div",{className:"row col-8 text-center border border-dark border-bottom-0 border-end-0 m-0 p-1 justify-content-around",children:e.needVector.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:e},t)}))})]})}function m(e){return Object(i.jsxs)("div",{className:"row m-0 p-0",children:[Object(i.jsx)("div",{className:"col-4 text-center",children:"Process Name"}),Object(i.jsxs)("div",{className:"col-8",children:[Object(i.jsx)("div",{className:"row text-center",children:Object(i.jsx)("div",{className:"col",children:"Needed Resources"})}),Object(i.jsx)("div",{className:"row text-center p-1",children:e.banker.available.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:String.fromCharCode("A".charCodeAt(0)+t)},t)}))})]})]})}var h=a(10),v=a(11),f=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(Object(h.a)(this,e),this.allocated=a,this.max=c;this.allocated.length<t;)this.allocated.push(0);for(;this.max.length<t;)this.max.push(0);this.finish=!1}return Object(v.a)(e,[{key:"incrementAllocated",value:function(e){var t=Object(o.a)(this.allocated);t[e]++,this.allocated=Object(o.a)(t)}},{key:"decrementAllocated",value:function(e){var t=Object(o.a)(this.allocated);t[e]>0&&(t[e]--,this.allocated=Object(o.a)(t))}},{key:"incrementMax",value:function(e){var t=Object(o.a)(this.max);t[e]++,this.max=Object(o.a)(t)}},{key:"decrementMax",value:function(e){var t=Object(o.a)(this.max);t[e]>0&&(t[e]--,this.max=Object(o.a)(t))}},{key:"copy",value:function(){return new e(this.allocated.length,Object(o.a)(this.allocated),Object(o.a)(this.max))}},{key:"need",value:function(){var e=this;return this.max.map((function(t,a){return t-e.allocated[a]}))}},{key:"willItRunUsingResources",value:function(e){for(var t=this.need(),a=0;a<e.length;a++){var c=e[a];if(t[a]>c||c<0)return!1}return!0}},{key:"end",value:function(){this.finish=!0}}]),e}(),x=function(){function e(t){Object(h.a)(this,e),this.processes=[],this.available=[],this.temporarilyAvailable=[];for(var a=0;a<t;a++)this.available.push(0);this.temporarilyAvailable=Object(o.a)(this.available)}return Object(v.a)(e,[{key:"encode",value:function(){var e=[this.available.length].concat(Object(o.a)(this.available));return this.processes.forEach((function(t){e=[].concat(Object(o.a)(e),Object(o.a)(t.allocated),Object(o.a)(t.max))})),e.join(",")}},{key:"addProcess",value:function(e){this.processes=[].concat(Object(o.a)(this.processes),[e])}},{key:"setAvailable",value:function(e){this.available=Object(o.a)(e)}},{key:"requestAdditionalResources",value:function(e,t){var a=this;console.log(e,t);for(var c=[],r=Object(o.a)(t);r.length<this.available.length;)r.push(0);try{var s=this.processes[e];this.processes[e].allocated=s.allocated.map((function(e,t){return c[t]=r[t],e+r[t]})),this.available=this.available.map((function(e,t){return e-r[t]}))}catch(l){throw console.error("Invalid index provided to requestAdditionalResources"),new Error("Invalid index provided to requestAdditionalResources")}var n=this.safe();return n[1]=["".concat(e,"req")].concat(Object(o.a)(n[1])),c.forEach((function(t,c){a.processes[e].allocated[c]-=t,a.available[c]+=t})),n}},{key:"safe",value:function(){for(var e=[],t=!0;t;){t=!1;for(var a=0;a<this.processes.length;a++){var c=this.processes[a],r=c.finish,s=c.willItRunUsingResources(this.available);!1===r&&s&&(this.getProcessResources(c),c.end(),t=!0,e.push(a))}}return this.processes.every((function(e){return e.finish}))?(this.restoreTemporarilyAvailableResources(),this.processes=this.processes.map((function(e){return e.finish=!1,e})),[!0,e]):(this.restoreTemporarilyAvailableResources(),[!1,[]])}},{key:"restoreTemporarilyAvailableResources",value:function(){var e=this;this.available=this.available.map((function(t,a){return t-e.temporarilyAvailable[a]})),this.temporarilyAvailable=this.temporarilyAvailable.map((function(){return 0}))}},{key:"getProcessResources",value:function(e){for(var t=0;t<e.allocated.length;t++)this.available[t]+=e.allocated[t],this.temporarilyAvailable[t]+=e.allocated[t]}},{key:"getNeedMatrix",value:function(){return this.processes.map((function(e){return e.need()}))}},{key:"print",value:function(){console.log("Available:",this.available);for(var e=0;e<this.processes.length;e++)console.log("Process ".concat(e,": "),this.processes[e])}}],[{key:"fromString",value:function(t){for(var a=0,c=t.split(",").map((function(e){return parseInt(e)})),r=c[a++],s=new e(r),n=[],o=0;o<r;o++)n.push(c[a++]);for(;void 0!==c[a];){for(var l=[],i=[],d=0;d<r;d++)l.push(c[a++]);for(var b=0;b<r;b++)i.push(c[a++]);s.addProcess(new f(r,l,i)),s.setAvailable(n)}return s}}]),e}();var O=a(4),p=a.n(O),N={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},g={display:"block",marginLeft:"auto",marginBottom:"20px"};function k(e){var t=Object(c.useState)(null),a=Object(l.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)(e.banker.available.map((function(){return 0}))),d=Object(l.a)(n,2),b=d[0],u=d[1],j=function(e){var t=Object(o.a)(b);t[parseInt(e.target.name)]=parseInt(e.target.value),u(t)};return Object(i.jsxs)(p.a,{isOpen:e.modalOpen,style:N,onRequestClose:e.toggleModal,shouldCloseOnOverlayClick:!0,children:[Object(i.jsx)("button",{className:"btn btn-white p-0",style:g,onClick:e.toggleModal,children:Object(i.jsx)("i",{className:"fas fa-times-circle fa-lg hover-pointer text-danger m-0"})}),Object(i.jsx)("div",{className:"row text-center mb-4",children:Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("select",{name:"process",id:"process",defaultValue:"-",onChange:function(e){s(parseInt(e.target.value))},children:[Object(i.jsx)("option",{value:"-",disabled:!0,children:"Please select a process"},-1),e.banker.processes.map((function(e,t){return Object(i.jsxs)("option",{value:t,children:["P",t]},t)}))]})})}),Object(i.jsx)("div",{className:"row justify-content-around mb-4",children:e.banker.available.map((function(e,t){return Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("input",{name:t,onChange:j,className:"form-control",placeholder:String.fromCharCode("A".charCodeAt(0)+t),style:{maxWidth:"60px"}})},t)}))}),Object(i.jsx)("div",{className:"row text-center",children:Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{className:"btn btn-success",onClick:function(){if(null!==r){var t=e.banker.requestAdditionalResources(r,b);e.showResult(function(e){return e[0]?"Yes, the request can be granted with safe state, Safe state ".concat(Object.values(e[1]).reduce((function(e,t){return e+"P".concat(Array.isArray(t)?t.join(""):t,",")}),"<")).slice(0,-1)+">":"No"}(t)),e.toggleModal()}else e.toggleModal()},children:"Request Resources"})})})]})}p.a.setAppElement("#root");var y=a(16),C=a.n(y);function w(e){return Object(i.jsxs)(p.a,{isOpen:e.modalOpen,style:N,onRequestClose:e.toggleModal,shouldCloseOnOverlayClick:!0,children:[Object(i.jsx)("div",{className:"m-4",children:e.text}),Object(i.jsx)("div",{className:"m-4 text-center",children:Object(i.jsx)(C.a,{text:e.text,onCopy:function(){return alert("Copied to clipboard")},children:Object(i.jsx)("button",{className:"btn btn-primary",children:"Copy to Clipboard"})})})]})}function A(e){var t=e.text.toLowerCase().startsWith("yes")?"success":"danger";return Object(i.jsxs)(p.a,{isOpen:e.modalOpen,style:N,onRequestClose:e.toggleModal,shouldCloseOnOverlayClick:!0,children:[Object(i.jsx)("button",{className:"btn btn-white p-0",style:g,onClick:e.toggleModal,children:Object(i.jsx)("i",{className:"fas fa-times-circle fa-lg hover-pointer text-danger m-0"})}),Object(i.jsx)("div",{className:"alert alert-".concat(t),children:e.text})]})}var S=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),n=Object(l.a)(s,2),d=n[0],h=n[1],v=Object(c.useState)([]),O=Object(l.a)(v,2),p=O[0],N=O[1],g=Object(c.useState)(!1),y=Object(l.a)(g,2),C=y[0],S=y[1],R=Object(c.useState)(""),M=Object(l.a)(R,2),P=M[0],q=M[1],I=Object(c.useState)(!1),E=Object(l.a)(I,2),F=E[0],T=E[1],L=Object(c.useState)(""),B=Object(l.a)(L,2),V=B[0],z=B[1],J=Object(c.useState)(!1),U=Object(l.a)(J,2),W=U[0],Y=U[1],D=Object(c.useState)(""),G=Object(l.a)(D,2),H=G[0],K=G[1];Object(c.useEffect)((function(){a&&a.processes&&N(a.processes)}),[a]);var Q=function(){S(!C)},X=function(){T(!F)},Z=function(){Y(!W)},$=Object(c.useState)(null),_=Object(l.a)($,2),ee=_[0],te=_[1],ae=function(){te(null)},ce=0;return null===a?Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"row my-4",children:[Object(i.jsx)("div",{className:"col row",children:Object(i.jsxs)("div",{className:"col-9 m-auto text-center",children:[Object(i.jsx)("label",{className:"form-label fs-4 mb-4",children:"Enter the number of resources"}),Object(i.jsx)("input",{className:"form-control fs-5 mb-4",onChange:function(e){h(e.target.value)},placeholder:"Resources"}),Object(i.jsx)("button",{className:"btn btn-primary fs-5",disabled:""===d,onClick:function(){if(d&&!isNaN(parseInt(d))&&d>0){var e=new x(d);r(e)}},children:"Submit"})]})}),Object(i.jsx)("div",{className:"col-1 d-flex justify-content-center align-items-center",children:"OR"}),Object(i.jsx)("div",{className:"col row",children:Object(i.jsxs)("div",{className:"col-9 m-auto text-center",children:[Object(i.jsx)("label",{className:"form-label fs-4 mb-4",children:"Enter a state string"}),Object(i.jsx)("textarea",{className:"form-control fs-5 mb-4",value:P,onChange:function(e){q(e.target.value)}}),Object(i.jsx)("button",{className:"btn btn-primary fs-5",disabled:""===P,onClick:function(){""!==P&&r(x.fromString(P))},children:"Enter State"})]})})]})}):Object(i.jsxs)("div",{className:"container my-4 py-4 fs-5",children:[Object(i.jsx)(A,{text:H,modalOpen:W,toggleModal:Z}),Object(i.jsx)(k,{banker:a,modalOpen:C,showResult:function(e){K(e),Z()},toggleModal:Q}),Object(i.jsx)(w,{text:V,modalOpen:F,toggleModal:X}),Object(i.jsx)("button",{className:"btn btn-secondary fs-5 me-2 mb-2",onClick:function(){a.addProcess(new f(a.available.length)),N(Object(o.a)(a.processes)),ae()},children:"Add Process"}),Object(i.jsx)("button",{className:"btn btn-primary fs-5 me-2 mb-2",onClick:function(){te(a.getNeedMatrix())},children:"Show Need Matrix"}),Object(i.jsx)("button",{className:"btn btn-primary fs-5 me-2 mb-2",onClick:function(){var e=a.safe();K(function(e){return e[0]?"Yes, Safe state ".concat(Object.values(e[1]).reduce((function(e,t){return e+"P".concat(t,",")}),"<")).slice(0,-1)+">":"No"}(e)),Z()},children:"Check System Safety"}),Object(i.jsx)("button",{className:"btn btn-warning fs-5 me-2 mb-2",onClick:function(){Q()},children:"Check Request Safety"}),Object(i.jsx)("button",{className:"btn btn-success fs-5 me-2 mb-2",onClick:function(){z(a.encode()),X()},children:"Save State"}),Object(i.jsx)("button",{className:"btn btn-dark fs-5 me-2 mb-2",onClick:function(){window.location.reload()},children:"Reset"}),Object(i.jsx)(b,{hideNeedMatrix:ae,banker:a}),p.map((function(e){return Object(i.jsx)(u,{index:ce++,hideNeedMatrix:ae,process:e},ce)})),Object(i.jsx)("br",{}),ee&&Object(i.jsxs)("div",{className:"row border border-dark",children:[Object(i.jsx)(m,{banker:a}),ee.map((function(e,t){return Object(i.jsx)(j,{index:t,needVector:e},t)}))]})]})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;a(e),c(e),r(e),s(e),n(e)}))};n.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root")),R()}},[[39,1,2]]]);
//# sourceMappingURL=main.0aa1d16a.chunk.js.map